/* * Created by IntelliJ IDEA. * User: nataliya * Date: Oct 10, 2002 * Time: 9:45:18 AM * To change template for new class use * Code Style | Class Templates options (Tools | IDE Options). */package ontorama.backends.p2p.controller;import ontorama.OntoramaConfig;import ontorama.backends.p2p.P2PBackend;import ontorama.backends.p2p.model.P2PGraph;import ontorama.backends.p2p.model.P2PNode;import ontorama.model.graph.GraphModificationException;import ontorama.model.graph.Node;import ontorama.model.graph.events.GraphNodeAddedEvent;import org.tockit.events.Event;import org.tockit.events.EventBroker;import org.tockit.events.EventBrokerListener;public class NodeAddedEventHandler  implements EventBrokerListener{    private EventBroker _eventBroker;    private P2PBackend _p2pBackend;    public NodeAddedEventHandler(EventBroker eventBroker, P2PBackend backend) {        _eventBroker = eventBroker;        _p2pBackend = backend;        System.out.println("\nNodeAddedEventHandler:: event broker = " + _eventBroker + "\n");        _eventBroker.subscribe(this, GraphNodeAddedEvent.class, P2PGraph.class);    }    public void processEvent(Event event) {        GraphNodeAddedEvent nodeAddedEvent = (GraphNodeAddedEvent) event;        Node node = nodeAddedEvent.getNode();        System.out.println("p2p NodeAddedEventHandler processEvent() for node " + node.getName());        P2PNode p2pNode = (P2PNode) OntoramaConfig.getBackend().createNode(node.getName(), node.getIdentifier());        try {            System.out.println("\n\n assertNode ");            _p2pBackend.assertNode(p2pNode, node.getCreatorUri());        }        catch (GraphModificationException modExc) {            /// @todo don't know what to do with exception here...            modExc.printStackTrace();            System.err.println("GraphModificationException: " + modExc.getMessage());        }    }}